"BSI";"Name";"Resources";"Start";"End";"Note";"Completion"
1;"Начало работ";"";"28-12-2017 00:00";"28-12-2017 00:00";"";"100%"
2;"Регистрация ВИС в тестовой и продуктивной среде СМЭВ-3 (69939)";"Приморский край (prim)";"28-12-2017 00:00";"11-01-2018 18:00";"Заказчик должен выполнить регистрацию ВИС по итогам регистрации прислать - наименование ВИС (сам придумывает), мнемонику (присваивает СМЭВ), ЭП (все файлы, не только сертификат) - для разворачивания у нас на тесте";"78%"
4;"Сделать PUSH сервис (69977)";"Зиновьев Вадим Алексеевич (vadim)";"28-12-2017 00:00";"11-01-2018 18:00";"Предполагаем использовать PUSH сервис для занятости. При получении запроса СМЭВ-3 будет его дергать и он запускать задачу получения запросов по ВС занятости (с Димой поговори). Если запрос придет с портала, то сервис вызовет либо портал, либо ДБ Агент, но мы это еще подумаем. Так же сервис будет нужен для КУ.Материалы по сервису я поместил в библиотеку ДПР";"78%"
5;"Сделать сервис в АСП, для ответа в СМЭВ по виду сведений VS00705v002-TABL00(безработный) (69949)";"Юрьев Юрий Иванович (ura)";"28-12-2017 00:00";"11-01-2018 18:00";"Подробно задание Дима распишет, я сделал только заготовку, чтобы на нее сослаться";"78%"
6;"Прием запросов по виду сведений VS00705v002-TABL00(по безработице) на ТИ (69942)";"Трутнев Дмитрий Александрович (dima)";"28-12-2017 00:00";"11-01-2018 18:00";"На ТИ добавить прием запросов по виду сведений URI: http://kvs.pfr.com/SZN/1.0.2. Задача должна вызываться: а) Основной способ - путем обращения к PUSH сервису (его будет вызывать СМЭВ-3). б) Путем ручного нажатия администратором ТИ. В задачу http://109.195.183.171:2121/SocPortal/Help/SMEV_FOIVLOG.html добавить синий флажок Действия и в нем действие - получить запросы из очереди СМЭВ-3 (можешь сократить, если там не вместится). Делай с таким расчетом, чтобы потом можно было легко добавить другие виды сведений, по которым будем получать (это будут сервисы КУ, и 96-Р) Работать должна в следующем порядке ----------------------------------- 1) Запуск задачи - при обращении в веб-сервису 2) Обращается на узел(ы) СМЭВ, настроенные в задаче http://109.195.183.171:2121/SocPortal/Help/_SETT_SMEV3.html - с включенной галочкой активность. Если таковых нет, то в протокол событий и ошибок делается запись. 3) Получение пока делать только для http://kvs.pfr.com/SZN/1.0.2 4) Если есть запрос, то записать его в задачу http://109.195.183.171:2121/SocPortal/Help/SMEV_FOIVLOG.html, статус - запрос получен. 5) Подтвердить полученный запрос, изменить его статус на получение запроса подтверждено. 6) Если есть еще запросы, то делать с п.3 Иначе прекратить опрос очереди и вызвать задачу подготовки ответа. Задача должна выставлять lock, чтобы не запускаться 2 раза. Предусмотреть удаление всех lock после перезагрузки ТИ. При попытке запуска с lock должна быть запись в протокол ошибок. Обрати внимание, что Вадим делает PUSH сервис, с ним надо вместе работать.";"78%"
3;"Оформить доступ к виду сведений VS00705v002-TABL00(по безработице) в качестве поставщика (69940)";"Приморский край (prim)";"11-01-2018 18:00";"18-01-2018 18:00";"Оформить доступ к виду сведений Получение сведений о нахождении на рег.учете в целях поиска работы; периодах получения пособия по безработице, участия в общественных работах, переезда по направлению ЦЗН с целью для трудоустройства(идентификатор VS00705v002-TABL00) в качестве поставщика, версия 1.0.2. Результат - копия письма от СМЭВ с извещение по получении доступа, в карточке сервиса ( https://smev3.gosuslugi.ru/portal/inquirytype_one.jsp?id=62287&zone=fed&page=1) в разделе поставщики добавлено наименование ВИС.";"0%"
7;"Ответ на запросы по ВС занятости VS00705v002-TABL00(по безработице) (69946)";"Трутнев Дмитрий Александрович (dima)";"11-01-2018 18:00";"18-01-2018 18:00";"Задача должна вызываться автоматически, после выполнения получения запросов, описанной в задании 69942. Порядок работы: 1) Задача бежит в таблицу входящих СМЭВ запросов и ищет запросы у которых ВС=VS00705v002-TABL00 и статус=получение запроса подтверждено и кол-во ошибок <=1 2) В каждом найденном запросе проверяет наличие XPATH=//tns:SZNRequestand smev:FirstName='ЕЛЕНА' and smev:Patronymic='ВЛАДИМИРОВНА' and tns:Snils='02773319862' Если находит - значит это тестовый сценарий из документации и она дает зашитый ответ. Переходит к п.4 Если XPATH не нашла, то идет к п.3 Делает запись в протокол, что дан ответ в рамках тестового сценария. 3) Пытается получить ответ из АСП, путем вызова сервиса в АСП через механизм http://109.195.183.171:2121/SocPortal/Help/pta.html#pta. Обсуди с Юрой, как писать данный сервис, напиши в его задание 69949. В результате написания в АСП должен появится этот сервис + документация для его тестирования в задание прикреплена. Она должна содержать: адрес сервиса, контрольные примеры запроса/ответа для получения данных на какой-то БД (несколько штук) Контрольные примеры должны закрывать ситуацию - человека нет в БД; человек есть, но информации нет; разные комбинации состава информации; пример с ошибкой; примеры проверяющие нормализацию (заглавные буквы, Ё). Обсудите, какое время ожидания ответа от АСП. Должен сделать запись в протокол - выполнен запрос по ВС ...., ГУИД .... в АСП и какой результат. Если получен какой-то ответ (хороший или с мотивированным отказом) записывать его в задачу http://109.195.183.171:2121/SocPortal/Help/SMEV_FOIVLOG.html статус = подготовлен ответ, счетчик ошибок установить в 0. Если АСП не ответила, завершаем работу задачи. Если АСП ответила с ошибкой, то увеличиваем счетчик ошибок у запроса на 1 4) Переходим к следующему запросу, найденному в п.1 В результате работы в таблице ответов у нас должны появится ответы со статусом = подготовлен ответ. Если кто-то завалился с ошибкой, то будем 5 раз пытаться получить ответ. Если сломался 5 раз, то прекращаем его мучить, ставим статус = Ошибка, пусть администратор вручную разбирается. Задача должна выставлять lock, чтобы не запускаться 2 раза. Предусмотреть удаление всех lock после перезагрузки ТИ. При попытке запуска с lock должна быть запись в протокол ошибок. После окончания работы запускает задачу отправки ответов, задание 69947";"0%"
9;"Руководство пользователя на сервис АСП";"Простаков Алексей Николаевич (alex)";"11-01-2018 18:00";"15-01-2018 18:00";"Описание сервиса + КП";"0%"
8;"Отправка подготовленных ответов в СМЭВ-3 (69947)";"Трутнев Дмитрий Александрович (dima)";"18-01-2018 18:00";"25-01-2018 18:00";"Задача нужно в первую очередь для VS00705v002-TABL00 (по безработице), но будет применена и в других ВС. Задача запускается автоматически из других задач, в частности задачи подготовки ответов, задание 69946. 1. Бежит в таблицу http://109.195.183.171:2121/SocPortal/Help/SMEV_FOIVLOG.html, находит все запросы со статусам Подготовлен ответ и ошибки <=5 2. Пытается отправить запросы в контур, из которого они пришли (надо как-то придумать различать тестовый и продуктивный). 3. Если отправить удалось, то делает запись в протокол и меняет статус запроса на Ответ отправлен 4. Если не удалось, то увеличивает счетчик ошибок на 1, делаем запись в протокол ошибок.";"0%"
11;"Провести тестирование вида сведений в тестовом контуре (69952)";"Простаков Алексей Николаевич (alex)";"25-01-2018 18:00";"01-02-2018 18:00";"Тут нужна минимально работающая программа, нужно чтобы отвечала по Петиной";"0%"
10;"Изменения в руководство администратора ТИ";"Простаков Алексей Николаевич (alex)";"02-02-2018 09:00";"05-02-2018 18:00";"Описание сервиса, примеры логов, просмотр запросов";"0%"
12;"Завершены работы в тестовом контуре";"";"05-02-2018 18:00";"05-02-2018 18:00";"Написано ПО, проверена его работа в тестовом контуре, на тестовом сценарии";"0%"
13;"Провести регистрацию ВИС в качестве поставщика в продуктивном контуре (69953)";"Приморский край (prim)";"05-02-2018 18:00";"12-02-2018 18:00";"";"0%"
14;"Провести тестирование в качестве поставщика в продуктивном контуре (69954)";"Приморский край (prim)";"12-02-2018 18:00";"19-02-2018 18:00";"Тут нужно полностью готовое ПО ТИ, БД АСП особо не важна";"0%"
15;"Провести тестирование по реальным данным,совместно с потребителем (69955)";"Приморский край (prim)";"19-02-2018 18:00";"27-02-2018 18:00";"Это нужно, чтобы потребители могли оформлять доступ к сервису, быть уверенными что он работает. Нужна наполненная БД АСП";"0%"
16;"Окончание работ";"";"27-02-2018 18:00";"27-02-2018 18:00";"ВИС зарегистрирована в качестве поставщика в проде, протестировали работу с одим потребителем, сервис развернут в проде, подсоединене в БД";"0%"
